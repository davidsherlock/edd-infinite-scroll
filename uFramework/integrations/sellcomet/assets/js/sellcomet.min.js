!function($){function e(e){return e.charAt(0).toUpperCase()+e.slice(1)}function n(e,n,a){0==a.find(".sellcomet-message").length&&$('<span class="sellcomet-message" style="display: none;"></span>').insertAfter(a.find(".spinner")),a.find(".sellcomet-message").removeClass("error").removeClass("success").addClass(n).html(e).fadeIn()}$("body").on("submit",".sellcomet-license-form",function(a){a.preventDefault();var s=$(this),t=s.find('input[type="submit"]'),i=s.find('input[name="action"]').val();if(""==s.find('input[type="text"][name$="-license-key"]').val())return n("Insert a valid license key","error",s),!1;s.find(".sellcomet-message").length&&s.find(".sellcomet-message").fadeOut(),t.prop("disabled",!0),s.find(".spinner").addClass("is-active"),$.ajax({url:sellcomet.ajax_url,method:"post",data:s.serialize(),cache:!1,success:function(a){if(t.prop("disabled",!1),s.find(".spinner").removeClass("is-active"),null!==a&&void 0!==a.license){var l="sellcomet_deactivate_license"==i?"deactivate":"activate",c="sellcomet_deactivate_license"==i?"activate":"deactivate";if(1==a.success){if("activate"===l&&"valid"!==a.license)return void n("Invalid license key","error",s);var r=s.find('input[name$="-license-key"]').val();s.find('input[name="action"]').val("sellcomet_"+c+"_license"),s.find('input[name$="-license-key"]').val(r.substring(0,4)+"*".repeat(r.length-8)+r.substring(r.length-4,r.length)),s.find('input[name$="-license-key"]').prop("readOnly","deactivate"==c),t.attr("name",t.attr("name").replace("-"+l,"-"+c)),t.attr("id",t.attr("id").replace("-"+l,"-"+c)),t.val(t.val().replace(e(l),e(c))),n("License "+l+"d successfully","success",s)}else"activate"==l?n("Invalid license","error",s):n("Can not deactivate license","error",s)}else n("Something went wrong!","error",s)}})})}(jQuery);